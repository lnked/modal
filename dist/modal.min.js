"use strict";var Modal=function(t,e,n){function o(t){return"#"==t.substr(0,1)&&(t=t.substr(1)),t}function i(t){var e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild}function s(t){"function"==typeof t&&t.call(null)}function r(t){return e.getElementById(t)?t:e.getElementById("tpl-"+t)?"tpl-"+t:!!e.getElementById("tmpl-"+t)&&"tmpl-"+t}function l(t,e,n){t.classList.remove("is-animated"),t.classList.remove("is-open"),setTimeout(function(){t.classList.add("is-hidden"),n&&t.parentNode.removeChild(t),s(e)},u.timeout)}function a(t){t.classList.remove("is-hidden"),setTimeout(function(){t.classList.add("is-animated"),t.classList.add("is-open")},16),c(t)}function c(t){t.focus();var n=e.createElement("button");n.style="position:absolute;width:1px;height:1px;opacity:0;right:0px;bottom:0px;background-color:#f00;outline:0;",t.appendChild(n),n.onfocus=function(){t.focus()}}var u={close:".j-close-modal",trigger:".j-open-modal",timeout:400};return{hooks:function(){var n=this;t.onkeydown=function(t){27==(t.which||t.keyCode)&&n.close(e.querySelectorAll(".modal.is-open"))}},open:function(t){var e="";t.getAttribute("href")&&(e=o(t.getAttribute("href"))),t.dataset.modal&&(e=o(t.dataset.modal)),(e=r(e))&&this.show(e)},bind:function(t){var e=this,n=t.querySelectorAll(u.close);if(n.length)for(var o=n.length-1;o>=0;o--)n[o].onclick=function(t){t.preventDefault(),e.close(t.target)}},show:function(t){var o=i(template(t,{}));this.bind(o),this.close(e.querySelectorAll(".modal.is-open"),function(){o.classList.add("is-temp"),o.setAttribute("aria-hidden",!1),n.appendChild(o),a(o)})},close:function(t,n){if(t.length)for(var o=t.length-1;o>=0;o--)l(t[o],n,!0);else void 0!==t.dataset&&t.dataset.target?l(e.querySelector(t.dataset.target),n,!0):s(n)},nested:function(){},events:function(){var t=this,n=e.querySelectorAll(u.trigger);if(n.length)for(var o=n.length-1;o>=0;o--)n[o].onclick=function(e){return e.preventDefault(),t.open(e.target),!1}},init:function(t){if(void 0!==t)for(var e in t)void 0!==u[e]&&(u[e]=t[e]);this.events(),this.hooks()}}}(window,document,document.body);